<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora con Bucle y Funciones</title>
</head>
<body>
  <h2>Calcular</h2>
  <button onclick="iniciarCalculadora()">Iniciar Calculadora</button>
  <p id="resultado"></p>

  <script>
    // Paso 1: Declaración de variables globales (se pueden usar valores por defecto)
    let num1 = 0;
    let num2 = 0;
    let operacion = "";

    // Paso 2: Función que realiza la operación
    function realizarOperacion(num1, num2, operacion) {
      if (operacion === "suma") {
        return num1 + num2;
      } else if (operacion === "resta") {
        return num1 - num2;
      } else if (operacion === "multiplicacion") {
        return num1 * num2;
      } else if (operacion === "division") {
        if (num2 === 0) {
          return "Error: No se puede dividir por 0.";
        }
        return num1 / num2;
      } else {
        return "Operación no válida.";
      }
    }

    // Paso 4: Bucle que repite hasta que el usuario quiera salir
    function iniciarCalculadora() {
      let seguir = true;
      let resultadoTexto = "";

      while (seguir) {
        // Solicitar los datos al usuario
        let entrada1 = prompt("Ingrese el primer número:");
        if (entrada1 === null) break; // cancelado
        num1 = parseFloat(entrada1);

        let entrada2 = prompt("Ingrese el segundo número:");
        if (entrada2 === null) break;
        num2 = parseFloat(entrada2);

        operacion = prompt("Ingrese la operación (suma, resta, multiplicacion, division) o 'salir' para terminar:");

        // Paso 5: Validar si desea salir
        if (operacion === null || operacion.toLowerCase() === "salir") {
          seguir = false;
          alert("Gracias por usar la calculadora. ¡Hasta pronto!");
          document.getElementById("resultado").innerText = "Sesión finalizada.";
          break;
        }

        // Validación y ejecución
        let resultado = realizarOperacion(num1, num2, operacion.toLowerCase());
        alert("Resultado: " + resultado);

        // Mostrar resultado en la página
        resultadoTexto += `\n${num1} ${operacion} ${num2} = ${resultado}`;
        document.getElementById("resultado").innerText = resultadoTexto;

        // Preguntar si desea continuar
        let continuar = confirm("¿Deseas realizar otra operación?");
        if (!continuar) {
          seguir = false;
          alert("Gracias por usar la calculadora. ¡Hasta pronto!");
          document.getElementById("resultado").innerText += "\nSesión finalizada.";
        }
      }
    }
  </script>
</body>
</html>